import{a as G,b as H,c as O}from"./chunk-NGXTSP7O.js";import{$ as y,A as k,D as q,E as o,H as u,J as x,K as a,L as d,M as C,N as f,O as b,P as n,Q as l,R as c,S as P,T as m,U as _,X as r,Y as w,Z as S,_ as $,ea as h,ga as L,n as N,na as A,qa as F,r as p,u as M,v as j,y as I}from"./chunk-HFTH3AZB.js";import"./chunk-7CGTOI24.js";var g=class e{selectedState=k("all");selectedLabels=k(new Set);labelQuery=F(()=>({queryKey:["labels"],queryFn:()=>G()}));issuesQuery=F(()=>({queryKey:["issues",{state:this.selectedState(),selectedLabels:[...this.selectedLabels()]}],queryFn:()=>H(this.selectedState(),[...this.selectedLabels()])}));showIssuesByState(i){this.selectedState.set(i)}toggleLabel(i){let t=this.selectedLabels();t.has(i)?t.delete(i):t.add(i),this.selectedLabels.set(new Set(t))}static \u0275fac=function(t){return new(t||e)};static \u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"})};var z=e=>({"border-color":e}),R=(e,i)=>i.id;function J(e,i){if(e&1){let t=P();n(0,"div",2),m("click",function(){let v=M(t).$implicit,K=_();return j(K.onToggleLabel(v.name))}),r(1),l()}if(e&2){let t=i.$implicit,s=_();d("selected-label",s.isSelected(t.name)),a("ngStyle",y(4,z,"#"+t.color)),o(),S(" ",t.name," ")}}var T=class e{labels=I.required();IssuesService=p(g);isSelected(i){return this.IssuesService.selectedLabels().has(i)}onToggleLabel(i){this.IssuesService.toggleLabel(i)}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=u({type:e,selectors:[["labels-selector"]],inputs:{labels:[1,"labels"]},decls:3,vars:0,consts:[[1,"flex","flex-wrap","justify-center","items-center","gap-2"],[1,"border","p2","rounded-md","hover:bg-slate-950","p-1","cursor-pointer",3,"selected-label","ngStyle"],[1,"border","p2","rounded-md","hover:bg-slate-950","p-1","cursor-pointer",3,"click","ngStyle"]],template:function(t,s){t&1&&(n(0,"div",0),f(1,J,2,6,"div",1,R),l()),t&2&&(o(),b(s.labels()))},dependencies:[L,h],encapsulation:2})};var W=e=>["/issue",e],X=e=>({border:e}),Y=(e,i)=>i.id;function Z(e,i){e&1&&c(0,"i",1)}function ee(e,i){e&1&&c(0,"i",2)}function te(e,i){if(e&1&&(n(0,"span",8),r(1),l()),e&2){let t=i.$implicit;a("ngStyle",y(2,X,"1px solid #"+t.color)),o(),S(" ",t.name," ")}}var E=class e{issue=I.required();issueService=p(O);get isOpen(){return this.issue().state==="open"}prefetchData(){this.issueService.seIssueData(this.issue())}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=u({type:e,selectors:[["issue-item"]],inputs:{issue:[1,"issue"]},decls:18,vars:9,consts:[[1,"flex","items-center","px-2","py-3","mb-5","border","rounded-md","bg-slate-900","hover:bg-slate-800",3,"mouseenter"],[1,"fa-regular","fa-folder-open","text-green-500"],[1,"fa-regular","fa-folder-closed","text-red-500"],[1,"flex","flex-col","flex-grow","px-2"],[1,"hover:underline",3,"routerLink"],[1,"text-gray-500"],[1,"font-bold"],[1,"flex","flex-wrap","mt-4"],[1,"px-2","py-1","mr-2","text-xs","text-white","rounded-md",3,"ngStyle"],["width","32","height","32","alt","User Avatar",1,"w-8","h-8","rounded-full",3,"src"],[1,"flex","flex-col","mx-2","items-center"],[1,"fa-regular","fa-message","text-gray-400"],[1,"px-4","text-gray-400"]],template:function(t,s){t&1&&(n(0,"div",0),m("mouseenter",function(){return s.prefetchData()}),x(1,Z,1,0,"i",1)(2,ee,1,0,"i",2),n(3,"div",3)(4,"a",4),r(5),l(),n(6,"span",5),r(7),n(8,"span",6),r(9),l()(),n(10,"div",7),f(11,te,2,4,"span",8,Y),l()(),c(13,"img",9),n(14,"div",10),c(15,"i",11),n(16,"span",12),r(17),l()()()),t&2&&(o(),C(s.isOpen?1:2),o(3),a("routerLink",y(7,W,s.issue().number)),o(),S(" ",s.issue().title," "),o(2),S(" #",s.issue().number," opened "),o(2),w(s.issue().user.login),o(2),b(s.issue().labels),o(2),a("src",s.issue().user.avatar_url,q),o(4),w(s.issue().comments))},dependencies:[L,h,A],encapsulation:2})};var ie=()=>[],se=(e,i)=>i.id;function ne(e,i){if(e&1&&c(0,"issue-item",7),e&2){let t=i.$implicit;a("issue",t)}}function oe(e,i){e&1&&(n(0,"p"),r(1,"Cargando Issues"),l())}function le(e,i){e&1&&(n(0,"p"),r(1,"No hay issues que mostrar"),l())}function re(e,i){if(e&1&&x(0,oe,2,0,"p")(1,le,2,0,"p"),e&2){let t=_();C(t.issuesQuery.isLoading()?0:1)}}function ae(e,i){e&1&&(n(0,"p"),r(1,"Estamos cargando"),l())}function ce(e,i){if(e&1&&c(0,"labels-selector",8),e&2){let t,s=_();a("labels",(t=s.labelsQuery.data())!==null&&t!==void 0?t:$(1,ie))}}var Q=class e{issuesService=p(g);get labelsQuery(){return this.issuesService.labelQuery}get issuesQuery(){return this.issuesService.issuesQuery}onChangeState(i){let t={all:"all",open:"open",closed:"closed"}[i]??"all";this.issuesService.showIssuesByState(t)}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=u({type:e,selectors:[["app-issues-list"]],decls:19,vars:8,consts:[[1,"my-5","border-b-2","border-blue-600"],[1,"grid","grid-cols-1","sm:grid-cols-3","gap-2"],[1,"flex","flex-col","col-span-3"],[1,"flex","gap-2"],[1,"btn","active",3,"click"],[1,"btn",3,"click"],[1,"mt-4","flex","flex-col","col-span-2"],[3,"issue"],[3,"labels"]],template:function(t,s){t&1&&(n(0,"h1"),r(1,"GitHub Issues"),l(),c(2,"dir",0),n(3,"section",1)(4,"div",2)(5,"div",3)(6,"button",4),m("click",function(){return s.onChangeState("all")}),r(7," All "),l(),n(8,"button",5),m("click",function(){return s.onChangeState("open")}),r(9," Open "),l(),n(10,"button",5),m("click",function(){return s.onChangeState("closed")}),r(11," Closed "),l()()(),n(12,"div",6),f(13,ne,1,1,"issue-item",7,se,!1,re,2,1),l(),n(16,"div"),x(17,ae,2,0,"p")(18,ce,1,2,"labels-selector",8),l()()),t&2&&(o(6),d("active",s.issuesService.selectedState()==="all"),o(2),d("active",s.issuesService.selectedState()==="open"),o(2),d("active",s.issuesService.selectedState()==="closed"),o(3),b(s.issuesQuery.data()),o(4),C(s.labelsQuery.isLoading()?17:18))},dependencies:[T,E],encapsulation:2})};export{Q as default};
